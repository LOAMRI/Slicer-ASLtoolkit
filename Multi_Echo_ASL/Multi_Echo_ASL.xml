<?xml version="1.0" encoding="utf-8"?>
<executable>
  <category>Neuroimaging</category>
  <index>0</index>
  <title>Multi Echo ASL</title>
  <description><![CDATA[Calculates the Multi Echo ASL image reconstruction.

CLI Usage: When running from command line, you can also use the --outputFolder flag to specify the output directory:
  Slicer --launch /path/to/Multi_Echo_ASL.py --inputASL asl.nii --inputM0 m0.nii --outputFolder /output/path --outputVolume t1blgm.nii --echos 13.56,67.82,122.08,176.33,230.59,284.84,339.1,393.36 --pld 170.0,270.0,370.0,520.0,670.0,1070.0,1870.0 --ld 100.0,100.0,150.0,150.0,400.0,800.0,1800.0

Note: The --outputFolder parameter is only available when running as a CLI module from terminal and is not shown in the GUI. If the user calls the CLI module but will not provide the --outputFolder flag, then the home directory is assumed to output the generated files.]]></description>
  <version>0.1.0.</version>
  <documentation-url>https://slicer-asltoolkit.readthedocs.io</documentation-url>
  <license/>
  <contributor>Antonio Senra Filho (State University of Campinas)</contributor>
  <acknowledgements><![CDATA[This work was funded by the State University of Campinas (Unicamp), Sao Paulo, Brazil.]]></acknowledgements>
  <parameters>
    <label>Input parameters</label>
    <description><![CDATA[Input parameters]]></description>
    
    <double-vector>
      <name>echos</name>
      <label>Echo Times (TE)</label>
      <longflag>echos</longflag>
      <default>13.56, 67.82, 122.08, 176.33, 230.59, 284.84, 339.1, 393.36</default>
      <description><![CDATA[The echo times (TE) used in the ASL imaging protocol. Informs each floating point number separated by single space.]]></description>
    </double-vector>
    <double-vector>
      <name>pld</name>
      <label>Post-Labelling Delays (PLD)</label>
      <longflag>pld</longflag>
      <default>170.0, 270.0, 370.0, 520.0, 670.0, 1070.0, 1870.0</default>
      <description><![CDATA[The post-labelling delays (PLD) used in the ASL imaging protocol. Informs each floating point number separated by single space.]]></description>
    </double-vector>
    <double-vector>
      <name>ld</name>
      <label>Labelling Duration (LD)</label>
      <longflag>ld</longflag>
      <default>100.0, 100.0, 150.0, 150.0, 400.0, 800.0, 1800.0</default>
      <description><![CDATA[The labelling duration (LD) used in the ASL imaging protocol. Informs each floating point number separated by single space.]]></description>
    </double-vector>
    <image>
      <name>outputVolume</name>
      <label>Output T Blood-GM Map</label>
      <longflag>outputVolume</longflag>
      <channel>output</channel>
      <description><![CDATA[Output T blood-GM map obtained from the multi echo ASL processing.]]></description>
    </image>
    <file fileExtensions=".nii,.nii.gz">
    <name>inputASL</name>
      <label>Input ASL file</label>
      <longflag>inputASL</longflag>
      <description><![CDATA[Input ASL file path in .nii or nii.gz format]]></description>
    </file>
    <file fileExtensions=".nii,.nii.gz">
    <name>inputM0</name>
      <label>Input M0</label>
      <longflag>inputM0</longflag>
      <description><![CDATA[Input the M0 file path to use as the reference signal for ASL computation. Provide the M0 file in .nii or nii.gz format]]></description>
    </file>
    <file fileExtensions=".nii,.nii.gz">
    <name>labelMask</name>
      <label>Input brain mask</label>
      <longflag>brainMask</longflag>
      <description><![CDATA[Input the brain mask file path. If empty, the entire image is used for the calculations (requires a longer processing time). Any pixel value different from zero is adopted as a valid brain label. Use brain mask file in .nii or nii.gz format]]></description>
    </file>
  </parameters>
  <parameters>
    <label>Advanced Options</label>
    <description><![CDATA[Advanced Options]]></description>
    <boolean>
      <name>averageM0</name>
      <label>Average M0</label>
      <longflag>averageM0</longflag>
      <default>false</default>
      <description><![CDATA[Indicates if an average calculation must be performed on the M0 images. This is common practice in ASL processing to improve SNR.]]></description>
    </boolean>
    <double>
      <name>t2b</name>
      <label>T2 Blood (ms)</label>
      <longflag>t2b</longflag>
      <default>165.0</default>
      <constraints>
        <minimum>0.01</minimum>
        <maximum>500.00</maximum>
        <step>0.01</step>
      </constraints>
      <description><![CDATA[The T2 value for the blood. By default, the value of 165 ms is assumed.]]></description>
    </double>
    <double>
      <name>t2gm</name>
      <label>T2 Gray Matter (ms)</label>
      <longflag>t2gm</longflag>
      <default>75.0</default>
      <constraints>
        <minimum>0.01</minimum>
        <maximum>500.00</maximum>
        <step>0.01</step>
      </constraints>
      <description><![CDATA[The T2 value for the blood. By default, the value of 75 ms is assumed.]]></description>
    </double>
    <integer>
      <name>numThreads</name>
      <label>Number of Threads</label>
      <longflag>numThreads</longflag>
      <default>-1</default>
      <description><![CDATA[Number of threads to be used during processing. More threads may speed up the processing on computers with multiple cores. The default value (-1) means to use all available cores.]]></description>
    </integer>
    <string-enumeration>
      <name>smoothMethod</name>
      <label>Smoothing Method</label>
      <longflag>smoothMethod</longflag>
      <description><![CDATA[Select the smoothing method to be applied prior to the T blood-GM calculation.]]></description>
      <element>None</element>
      <element>Gaussian</element>
      <element>Median</element>
      <default>None</default>
    </string-enumeration>
    <float>
      <name>smoothParameter</name>
      <label>Smoothing Parameter</label>
      <longflag>smoothParameter</longflag>
      <default>3.0</default>
      <description><![CDATA[Defines the smoothing parameter based on the smoothing method. If Gaussian was chosen, the parameter represents the sigma value. If Median was chosen, the parameter represents the kernel size (must be an odd number).]]></description>
    </float>
  </parameters>
</executable>
